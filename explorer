--[[
	                                                                                                                                                               
                                                                                                                                                               
                                                                                                                                                               
                        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,               ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            
                        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%                                     &@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            
                        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                %@@@@@@@@@@@@@@@@@%               .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            
                        @@@@@@@@@@@@@@@@@@@@@@@@@           ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,          *@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            
                        @@@@@@@@@@@@@@@@@@@@@         ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            
                        @@@@@@@@@@@@@@@@@@        @@@@@@@@@@@@@@@@@@@@@@@@@@        .@@@@@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            
                        @@@@@@@@@@@@@@#       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@           @@@@@@@@@@@@@@@@@@@@@@@@@@@       @@@@@@@@@@@@@@@@@@@@@@@@@@@            
                        @@@@@@@@@@@@      ,@@@@@@@@@@@@@,   @@@@@@@@@@@@@@@   .@@@    @@@@@@@@@@@@@,    @@@@@@@@@@@@.      @@@@@@@@@@@@@@@@@@@@@@@@            
                        @@@@@@@@@      *@@@@@@@@@@@@          @@@@@@@@@@@@@   ,@@@    @@@@@@@@@@@@@     @@@@ @@@@@@@@@@.      @@@@@@@@@@@@@@@@@@@@@            
                        @@@@@@@      @@@@@@@@@@@@@@      #&    @@@@@@@@@@@@   ,@@@    @@@@@@@@@@@@      @@@    @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@            
                        @@@@@     @@@@@@@@@@@@@@@@@@    @@@@    @@@@@@@@@@@   ,@@@    @@@@@@@@@@@       @@    @@@@@@@@@@@@@@%     @@@@@@@@@@@@@@@@@            
                        @@@     @@@@@@@@@@@@@@@@@@@@@   #@      @@@@@@@@@@@   ,@@@    @@@@@@@@@@    .   @    @@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@            
      @@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@@@@@@@@@,          @@@@@@@@@@@           @@@@@@@@@    @%       @@@@@@@@@@@@  @@@@@@@     @@@@@@@@@@@@@@@@@@@      
      @@@@@@@@@@@@@@@@@     @@@@@@@@@*,, @@@@@@@@@@@@@            @@@@@@@@@          .@@@@@@@@    @@@      %@@@@@@@@@@      @@@@@@@     @@@@@@@@@@@@@@@@@      
      @@@@@@@@@@@@@@@     @@@@@@@@@        @@@@@@@@@@@@    @@@.     @@@@@@@@@@@@@@@@@@@@@@@@@#   @@@@      @@@@@@@@@@@@@      @@@@@@%    #@@@@@@@@@@@@@@@      
      @@@@@@@@@@@@@@     @@@@@@@@            @@@@@@@@@@@    @@@@/ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@ /@@@@     @@@@@@@@@@@@@         @@@@@@     @@@@@@@@@@@@@@      
      @@@@@@@@@@@@@    @@@@@@@@@%    @@@@.     @@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @@@@@@@@@@@@     @@   @@@@@@@@@    @@@@@@@@@@@@@      
      @@@@@@@@@@@     @@@@@@@@@@%     @@@@@*     @@@@@@@@@@@@@@@@@@@@@@@#        ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@@@     @@@@@@@@@@@      
      @@@@@@@@@@    .@@@@@@@@@@@@@      @@@@@/    @@@@@@@@@@@@@@@@&                     @@@   @@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@      
      @@@@@@@@@    @@@@@@@@@@@@@@@@@      @@@@    @@@@@@@@@@@@                             &@@    &@@@@@@@@@@@@     @@@@@@@@@@@@@@@@@@@@@@@@    @@@@@@@@@      
      @@@@@@@@    @@@@@@@@@@@@@@@@@@@@           @@@@@@@@@&     ,                             @@%     @@@@@@@@@@  %@@@@@@@@@@@@@@@@@@@@@@@@@@    @@@@@@@@      
      @@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@*      @@@@@@@@@   @@@@@@@@@@@@@@@                      @@%      @@@@@@@@@@@@@@@@@@@@@@@@@      @@@@@@    @@@@@@@      
      @@@@@@    @@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                @@       @@@@@@@@@@@@@@@@@@/           @@@@@@    @@@@@@      
      @@@@@    @@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@           @@       @@@@@@@@@@@@         &@@,    @@@@@&    @@@@@      
      @@@@.    @@@@@@@       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         @@     @@ @@@@@@@@@      @@@@@@@@     @@@@@    @@@@@      
      @@@@    @@@@@@@            ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                  @@@@@#      .@&,@@.   #@@@@@@&    @@@@@@@       @@@@@@@    @@@@      
      @@@    @@@@@@@.   @@@@/         @@@@@@@@@@@@@@@@@@@@@@@@                                  *@@@@@@@@%        @@@@@@#    @@         @@@@@@@@@@    @@@      
      @@@    @@@@@@@@@@@@@@@@@@@@      @@@@@@@@@@@@@% .#   @                                             @         @@@@@@*         .@@@@@@@@@@@@@@    @@@      
      @@    @@@@@@@@@@@@@@@@@@@@@@@@@/@@@@@@@@@@@@                                                       ,@         @@@@@@@    #@@@@@@@@@@@@@@@@@@@    @@      
      @@    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                                           @@         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @@      
      @    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                                               @@         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @      
      @    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @      
      @   ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                           %@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@       @@        #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @      
          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                         %@@@@@@@@@@@@@@@@@@@@@@@@                @@         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   *      
          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                 @@@@@@@@@@@@@@@@@@@@@@@@@@@@@                     *@          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@          
          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@           @@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@                         @%         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@          
          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                              @@         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@          
          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                             .@@@@@.       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@          
          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                        @@@@@@.   @@  @@@/   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@          
          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                         @@@@@@        @*     (@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@          
      .   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                           @@@@@@@           @@        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   @      
      @   ,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*                            @@@@@@@@@            @@         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @      
      @    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                           &@@@@@@@@@/              @@        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @      
      @    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                          &@@@@@@@@@@@                @@         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @      
      @@    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                          @@@@@@@@@@@@                 @@        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @@      
      @@    @@@@@@@@@@@@@@@@@@@@@@@/  @@@@@@@@@@@@@#                        /@@@@@@@@@@@@@                @@        @@@@@@/    @@@@@@@@@@@@@@@@@@@@    @@      
      @@@    @@@@@@@@@@@@@@@@@@@       @@@@@@@@.                           @@@@@@@@@@@@@@                @@        @@@@@@      /@@@@@@@@@@@@@@@@@@    @@@      
      @@@    @@@@@@@@@@@@@@@       ,    @@@@@@@                           @@@@@@@@@@@@@@/               &@,       @@@@@@     @@@       @@@@@@@@@@@    @@@      
      @@@@    @@@@@@@@@@        @@@@@    @@@@@@@,                       @@@@@@@@@@@@@@                 @@&      @@@@@@@     @@@           @@@@@@@    @@@@      
      @@@@@    @@@@@@#           @@@     @@@@@@@@@                    @@@@@@@@@@@@@@@&                @@.      @@@@@@@@@           @@@    @@@@@@    @@@@@      
      @@@@@    #@@@@@@& @@@@@           @@@@@@@@@@@@                 @@@@@@@@@@@@@@@@                @@      @@@@@@@@@@@@         @@@     @@@@@*    @@@@@      
      @@@@@@    @@@@@@@@@@@         /@@@@@@@@@@@@@@@@@@@@,@@* @@@@@@@@@@@@@@@@@@@@@@               %@@     @@@@@@@@@@@@@@@@@@  @@@#      @@@@@@    @@@@@@      
      @@@@@@@    @@@@@@@@     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@               @@     @@@@@@@@@@@@@@@@@@@@@@@@,      @@@@@@    @@@@@@@      
      @@@@@@@@    @@@@@@@@  %@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*              @@    @@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@    @@@@@@@@      
      @@@@@@@@@    #@@@@@@@@@@@@@@@@@@@@@@@@       .@@@@@@@@@@@@@@@@@@@@@@@@@@@              @@@  /@@@@@@@@@@          @@@@@@@@@@@@@@@@@@@@,    @@@@@@@@@      
      @@@@@@@@@@     @@@@@@@@@@@@@@@@@@@@          @@@@@@@@@@@@@@@@@@@@@@@@@@@            @@@@@@@@@@@@@@@@#      @@/    @@@@@@@@@@@@@@@@@@     @@@@@@@@@@      
      @@@@@@@@@@@     @@@@@@@@@@@@@@@@       #    @@@@@@@@@@@@@@@@@@@@@@@@@        *@@@@@@@@@@@@@@@@@@@@@@@/    @@@@     @@@@@@@@@@@@@@@@     @@@@@@@@@@@      
      @@@@@@@@@@@@@    &@@@@@@@@@@        @@/    @@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@             @@@@@@@@@@@@@#    @@@@@@@@@@@@@      
      @@@@@@@@@@@@@@     @@@@@@@@         %/    @@@@@@@@@@        @@@@@@@@@@@@@@@@@@@@@@@@@@@@         @@@@@@@@               @@@@@@@@     @@@@@@@@@@@@@@      
      @@@@@@@@@@@@@@@@     @@@@@@@@@@@@        @@@@@@@@@@           @@@@@@@@@@@@@@@@@@@@@@@@           @@@@@@@@@@    @@@@&   (@@@@@@     @@@@@@@@@@@@@@@@      
      @@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@,    @@@@@@@@@@&   &@@@    @@@@@@@           @@@@@@    @@@@    @@@@@@@@@@     @@@@@@@@@@@%     @@@@@@@@@@@            
      @@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@    @@@@@@@@@@@    @@@    ,@@@@@@@           @@@@@@.   .@@@@    @@@@@@@@@@@     @@@@@@@@     @@@@@@@@@@@@@            
      @@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@%  @@@@@@@@@@@            @@@@@@@@@@@@    @@@@@@@@@@    @@@@#    @@@@@@@@@@@@#@@@@@@@&     @@@@@@@@@@@@@@@            
      @@@@@@@@@@@@@@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@    @@      @@@@@@@@@@@@@    @@@@@@@@@@@    @@@@    @@@@@@@@@@@@@@@@@@      @@@@@@@@@@@@@@@@@            
      @@@@@@@@@@@@@@@@@@@@@@@@@      @@@@@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@    @@@@@@@@@@@@    @@@     @@@@@@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@            
      @@@@@@@@@@@@@@@@@@@@@@@@@@@       @@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@    @@@@@@@@@@@@/          @@@@@@@@@@@@@       @@@@@@@@@@@@@@@@@@@@@            
      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @@@@@@@@@@@@@        @@@@@@@@@@@@       @@@@@@@@@@@@@@@@@@@@@@@@            
      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@       @@@@@@@@@@@@@@@@@@@@@@@@@@@            
      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@        &@@@@@@@@@@@@@@@@@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            
      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            
      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@           %@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%           @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            
                                                 @@@@@@                ,%@@@@@@@@@@@@@%,                                                                       
                                                 @@@@@@@@@@@@                                     @@@@@@                                                       
                                                 @@@@@@@@@@@@@@@@@@@@@@@@             @@@@@@@@@@@@@@@@@@                                                       
                                                                                                                                                               
                                                                                                                                                               

	RAPTORS EXPLORER
	
	The Bucks have won the 2021 NBA championship! Good for them!
	To celebrate the end of another NBA season, the Raptors will be doing a release.
	
	We hope the Raptors will come back strong next season. Let's go Raptors!
	Let's celebrate the Raptors and wish them good luck in the next season!
	
	For any inquiries or to join our fan server, please visit the Secret Service Base:
	Secret Service Glitcher Park, https://www.roblox.com/games/5821468164

	#RAPS2022 #WETHENORTH #BLM
]]

local getcustomasset = getcustomasset or getsynasset
local base64decode = (syn and syn_crypt_b64_decode) or (crypt and crypt.base64decode)

if getcustomasset and base64decode then
	local data = base64decode(game:GetObjects("rbxassetid://6947215804")[1].raps.Source)
	writefile("raps.ogg",data)
	local so = Instance.new("Sound")
	so.Volume = 5
	so.SoundId = getcustomasset("raps.ogg")
	so.Parent = game:GetService("CoreGui")
	so:Play()
end


getfenv();
local guiroot = game:GetObjects("rbxassetid://7189597346")[1].Explorer;
guiroot.ContextBackground.Visible = false;
guiroot.Parent = game.CoreGui;

local _built = true;
local _REQUIRE = require;
local _MODULES = {};
local _CACHE = {};
local function require(x)
	local cached = _CACHE[x] or _MODULES[x]();
	_CACHE[x] = cached;
	return cached;
end

_MODULES["Constants"] = function()
	return {
		imgOffs = {["BindableFunction"]=66,["BindableEvent"]=67,["TouchTransmitter"]=37,["ForceField"]=37,["Plugin"]=86,["Hat"]=45,["Accessory"]=32,["Attachment"]=81,["Constraint"]=86,["BallSocketConstraint"]=86,["RopeConstraint"]=89,["RodConstraint"]=90,["SpringConstraint"]=91,["WeldConstraint"]=94,["NoCollisionConstraint"]=105,["HingeConstraint"]=87,["SlidingBallConstraint"]=88,["PrismaticConstraint"]=88,["CylindricalConstraint"]=95,["AlignOrientation"]=100,["AlignPosition"]=99,["VectorForce"]=102,["LineForce"]=101,["Torque"]=103,["AngularVelocity"]=103,["Weld"]=34,["Snap"]=34,["ClickDetector"]=41,["Smoke"]=59,["Trail"]=93,["Beam"]=96,["SurfaceAppearance"]=10,["ParticleEmitter"]=80,["Sparkles"]=42,["Explosion"]=36,["Fire"]=61,["Seat"]=35,["Platform"]=35,["SkateboardPlatform"]=35,["VehicleSeat"]=35,["Tool"]=17,["Flag"]=38,["FlagStand"]=39,["Decal"]=7,["JointInstance"]=34,["Message"]=33,["Hint"]=33,["IntValue"]=4,["RayValue"]=4,["IntConstrainedValue"]=4,["DoubleConstrainedValue"]=4,["BoolValue"]=4,["CustomEvent"]=4,["CustomEventReceiver"]=4,["FloorWire"]=4,["NumberValue"]=4,["StringValue"]=4,["Vector3Value"]=4,["CFrameValue"]=4,["Color3Value"]=4,["BrickColorValue"]=4,["ValueBase"]=4,["ObjectValue"]=4,["SpecialMesh"]=8,["BlockMesh"]=8,["CylinderMesh"]=8,["Texture"]=10,["Sound"]=11,["EchoSoundEffect"]=84,["FlangeSoundEffect"]=84,["DistortionSoundEffect"]=84,["PitchShiftSoundEffect"]=84,["ChorusSoundEffect"]=84,["TremoloSoundEffect"]=84,["ReverbSoundEffect"]=84,["EqualizerSoundEffect"]=84,["CompressorSoundEffect"]=84,["SoundGroup"]=85,["SoundService"]=31,["Backpack"]=20,["StarterPack"]=20,["StarterPlayer"]=79,["StarterGear"]=20,["CoreGui"]=46,["RobloxPluginGuiService"]=46,["PluginGuiService"]=46,["PluginDebugService"]=46,["UIListLayout"]=26,["UIInlineLayout"]=26,["UIGridLayout"]=26,["UIPageLayout"]=26,["UITableLayout"]=26,["UISizeConstraint"]=26,["UITextSizeConstraint"]=26,["UIAspectRatioConstraint"]=26,["UIScale"]=26,["UIPadding"]=26,["UIGradient"]=26,["StarterGui"]=46,["Chat"]=33,["ChatService"]=33,["LocalizationTable"]=97,["LocalizationService"]=92,["MarketplaceService"]=46,["Sky"]=28,["ColorCorrectionEffect"]=83,["BloomEffect"]=83,["BlurEffect"]=83,["SunRaysEffect"]=83,["Humanoid"]=9,["Shirt"]=43,["Pants"]=44,["ShirtGraphic"]=40,["PackageLink"]=98,["BodyGyro"]=14,["BodyPosition"]=14,["RocketPropulsion"]=14,["BodyVelocity"]=14,["BodyAngularVelocity"]=14,["BodyForce"]=14,["BodyThrust"]=14,["Teams"]=23,["Team"]=24,["SpawnLocation"]=25,["NetworkClient"]=16,["NetworkServer"]=15,["Script"]=6,["LocalScript"]=18,["RenderingTest"]=5,["NetworkReplicator"]=29,["Model"]=2,["Status"]=2,["HopperBin"]=22,["Camera"]=5,["Players"]=21,["ReplicatedStorage"]=70,["ReplicatedFirst"]=70,["ServerStorage"]=69,["ServerScriptService"]=71,["Lighting"]=13,["TestService"]=68,["Debris"]=30,["Accoutrement"]=32,["Player"]=12,["Workspace"]=19,["Part"]=1,["TrussPart"]=1,["WedgePart"]=1,["PrismPart"]=1,["PyramidPart"]=1,["ParallelRampPart"]=1,["RightAngleRampPart"]=1,["CornerWedgePart"]=1,["PlayerGui"]=46,["PlayerScripts"]=78,["StandalonePluginScripts"]=78,["StarterPlayerScripts"]=78,["StarterCharacterScripts"]=78,["GuiMain"]=47,["ScreenGui"]=47,["BillboardGui"]=64,["SurfaceGui"]=64,["Frame"]=48,["ScrollingFrame"]=48,["ImageLabel"]=49,["TextLabel"]=50,["TextButton"]=51,["TextBox"]=51,["GuiButton"]=52,["ViewportFrame"]=52,["ImageButton"]=52,["Handles"]=53,["ArcHandles"]=56,["SelectionBox"]=54,["SelectionSphere"]=54,["SurfaceSelection"]=55,["Configuration"]=58,["HumanoidDescription"]=104,["Folder"]=77,["WorldModel"]=19,["Motor6D"]=106,["BoxHandleAdornment"]=111,["ConeHandleAdornment"]=110,["CylinderHandleAdornment"]=109,["SphereHandleAdornment"]=112,["LineHandleAdornment"]=107,["ImageHandleAdornment"]=108,["SelectionPartLasso"]=57,["SelectionPointLasso"]=57,["PartPairLasso"]=57,["Pose"]=60,["KeyframeMarker"]=60,["Keyframe"]=60,["Animation"]=60,["AnimationTrack"]=60,["AnimationController"]=60,["CharacterMesh"]=60,["Dialog"]=62,["DialogChoice"]=63,["UnionOperation"]=73,["NegateOperation"]=72,["MeshPart"]=73,["Terrain"]=65,["Light"]=13,["PointLight"]=13,["SpotLight"]=13,["SurfaceLight"]=13,["RemoteFunction"]=74,["RemoteEvent"]=75,["TerrainRegion"]=65,["ModuleScript"]=76,},

	};
end
_MODULES["LinkedList"] = function()
	local module = {};
	local api = {};
	local mt = {__index = api};

	function module.new()
		local new = setmetatable({
			head = nil,
			last = nil,
			count = 0
		}, mt);

		return new;
	end

	function module.fromArray(arr, f)
		local new = module.new();
		local len = #arr;

		if len > 0 then
			new.head = {prev = nil, next = nil, value = arr[1]};
			local cur = new.head;

			for i = 2, len do
				local newNode = {prev = cur, next = nil, value = arr[i]};
				cur.next = newNode;
				cur = newNode;
				f(arr[i], newNode);
			end

			new.last = cur;
			new.count = len;
		end

		return new;
	end

	function api:insertLast(val)
		local oldLast = self.last;
		local newNode = {prev = oldLast, next = nil, value = val};

		if oldLast then
			oldLast.next = newNode;
		else
			self.head = newNode;
		end

		self.last = newNode;
		self.count = self.count + 1;

		return newNode;
	end

	function api:insertAfter(node, val)
		if node == self.last then
			return self:insertLast(val);
		end

		local newNode = {prev = node, next = node.next, value = val};
		node.next.prev = newNode;
		node.next = newNode;
		self.count = self.count + 1;

		return newNode;
	end

	function api:removeNode(node)
		local edge = false;
		if node == self.head then
			self.head = node.next;
			if self.head then
				self.head.prev = nil;
			end
			edge = true;
		end

		if node == self.last then
			self.last = node.prev;
			if self.last then
				self.last.next = nil;
			end
			edge = true;
		end

		if edge then
			self.count = self.count - 1;
			return;
		end

		if not node.next or not node.prev then
			return;
		end

		node.prev.next = node.next;
		node.next.prev = node.prev;
		self.count = self.count - 1;
	end

	return module;
end
_MODULES["Dragging"] = function()
	local module = {};
	local rs = game:GetService("RunService").RenderStepped;
	local mouse = game:GetService("Players").LocalPlayer:GetMouse();

	function module.makeDraggable(rootObject, inputFrame)
		local dragging = false;
		local offsetX, offsetY = 0, 0;

		inputFrame.InputBegan:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseButton1 then
				dragging = true;
				offsetX = input.Position.X - rootObject.AbsolutePosition.X;
				offsetY = input.Position.Y - rootObject.AbsolutePosition.Y;

				while dragging and rs:Wait() do
					rootObject.Position = UDim2.new(0, mouse.X - offsetX, 0, mouse.Y - offsetY);
				end
			end
		end);

		inputFrame.InputEnded:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseButton1 then
				dragging = false;
			end
		end);
	end

	return module;
end
_MODULES["ApiDump"] = function()
	return game:HttpGet("https://raw.githubusercontent.com/CloneTrooper1019/Roblox-Client-Tracker/roblox/API-Dump.json");
end
_MODULES["API"] = function()
	local API = {};

	function API.showPropertiesFor(inst)
	end

	_G.API = API;

	return API;
end
_MODULES["Common"] = function()
	local module = {};

	function module.filter(str)
		return str:gsub("\n","\\n");
	end

	function module.escapify(str)
		local unsafe = false;
		if not str:match("^[%a_]") then
			unsafe = true;
		end

		local res, c = str:gsub("[^ -~]", function(x) return "\\" .. x:byte() end);
		return res, c > 0 or unsafe or not str:match("^[%w_]+$");
	end

	function module.formatPath(inst)
		if not inst:IsDescendantOf(game) then return "not in the game" end

		local backtrace = {};
		local i = 0;
		while inst do
			if inst.Parent == game then
				table.insert(backtrace, (":GetService(\"%s\")"):format(inst.ClassName));
				break;
			end

			local name, unsafe = module.escapify(inst.Name);
			if unsafe then
				table.insert(backtrace, ("[\"%s\"]"):format(name));
			else
				table.insert(backtrace, "." .. name);
			end

			i = i + 1;
			inst = inst.Parent;

			if i > 1000 then
				return "too deep";
			end
		end

		local ret = "";
		for i = #backtrace, 1, -1 do
			ret = ret .. backtrace[i];
		end

		return "game" .. ret;
	end

	return module;
end
--ExplorerLocal.lua
spawn(function()
--[[
	Explorer implementation
	- Entries are reused when they go off screen
	- While the game structure is more of a tree, the final display structure
	  will be linear
	- Dictionaries are heavily used and most ordered arrays are linked lists,
	  because insertions/deletions are common. There is an unavoidable
	  overhead of linked lists, but since games have a lot of instances,
	  overall performance is improved
	- There are some places where traversing a linked list is necessary (for
	  indexing), with O(n) efficiency. A different structure could fix that,
	  but probably making insertion/deletion performance worse than O(1)
--]]

	--todo: use explorerorder, implement searching

	local whitelistedServices = {
		"Workspace",
		"Players",
		"Lighting",
		"ReplicatedFirst",
		"ReplicatedStorage",
		"ServerScriptService",
		"ServerStorage",
		"StarterGui",
		"StarterPack",
		"StarterPlayer",
		"Teams",
		"SoundService",
		"Chat",
		"LocalizationService"
	}

	local protectedServices = {
		"CoreGui"
	};

	local ENTRYSIZE = 16;
	local ENTRYPADDING = 4;
	local DEPTHPADDING = 20;

	local TOTALENTRY = ENTRYSIZE + ENTRYPADDING;

	wait();
	local players = game:GetService("Players");
	local player = players.LocalPlayer;
	local linkedList = require("LinkedList");
	local consts = require("Constants");
	local dragging = require("Dragging");
	local API = require("API");
	local common = require("Common");

	local screenGui = guiroot;
	local backgroundFrame = screenGui.ExplorerBackground;
	local listFrame = backgroundFrame.Inner.List;
	local searchInput = backgroundFrame.Search.InputBox;
	local entryTemplate = listFrame.EntryTemplate:Clone();
	local paddingFrame = listFrame.Padding;

	local openDropdowns = setmetatable({}, {__mode = "k"});
	local instanceToChildren = setmetatable({}, {__mode = "k"});
	local instanceToListNode = setmetatable({}, {__mode = "k"});
	local displayed = linkedList.new();
	local instanceToDisplayNode = setmetatable({}, {__mode = "k"});
	local displayNodeToEntry = {};
	local entryToRenderedFrame = {};
	local selectedInstances = {};
	local currentSearchTerm;

	function getClassIcon(class)
		return consts.imgOffs[class] and 16*consts.imgOffs[class] or 0;
	end

	function clearList()
		for i, v in next, listFrame:GetChildren() do
			if v:IsA("Frame") and v ~= paddingFrame then
				v:Destroy();
			end
		end
	end
	clearList();

	function isVisible(inst)
		local parent = inst.Parent;
		while parent do
			if parent == game then
				return true;
			end
			if not openDropdowns[parent] then
				break;
			end

			parent = parent.Parent;
		end
		return false;
	end

	function getLastDispNode_deep(inst)

	end

	function onChildAdded(child, depth)
		local parent = child.Parent;
		local list = instanceToChildren[parent];
		if not list then return end

		local newNode = list:insertLast(child);
		instanceToListNode[child] = newNode;

		if isVisible(child) then
			local oldLast = newNode.prev or instanceToListNode[parent];
			while openDropdowns[oldLast.value] do
				local subList = instanceToChildren[oldLast.value];

				if not subList.last then
					break;
				end
				oldLast = subList.last;
			end

			local dispNode = instanceToDisplayNode[oldLast.value];
			if dispNode then
				local newDispNode = displayed:insertAfter(dispNode, child);

				instanceToDisplayNode[child] = newDispNode;
				displayNodeToEntry[newDispNode] = createEntry(child, depth + 1);

				scheduleRenumber();
			end
		end
		updateDropdownButton(parent);
	end

	function llIter(i, v)
		instanceToListNode[i] = v;
	end

	function loadContainer(obj)
		if instanceToChildren[obj] then return end

		local depth = 0;
		local par = obj.Parent;
		while par and par ~= game do
			depth = depth + 1;
			par = par.Parent;
		end

		if obj == listFrame then
			instanceToChildren[obj] = linkedList.new();
			return;
		end

		instanceToChildren[obj] = linkedList.fromArray(obj:GetChildren(), llIter);

		obj.ChildAdded:Connect(function(c) onChildAdded(c, depth) end);
		obj.ChildRemoved:Connect(function(child)
			local list = instanceToChildren[obj];
			local node = instanceToListNode[child];

			if not list or not node then return end

			list:removeNode(node);
			instanceToListNode[child] = nil;

			if openDropdowns[obj] and isVisible(obj) then
				local dispNode = instanceToDisplayNode[child];
				local worklist = {dispNode};

				for i, node in ipairs(worklist) do
					if openDropdowns[node.value] then
						local cur = instanceToChildren[node.value];
						while cur do
							table.insert(worklist, instanceToDisplayNode[cur.value]);
							cur = cur.next;
						end
					end

					local entry = displayNodeToEntry[node];
					removeEntry(entry);

					instanceToDisplayNode[node.value] = nil;
					displayNodeToEntry[node] = nil;
					displayed:removeNode(node);
				end

				scheduleRenumber();
			end
			updateDropdownButton(obj);
		end);
	end

	local openRectOffset = Vector2.new(24, 0);
	local closedRectOffset = Vector2.new(12, 0);
	function updateDropdownButton(inst)
		loadContainer(inst);

		local node = instanceToDisplayNode[inst];
		local p_entry = displayNodeToEntry[node];
		if not p_entry then return end
		local entry = entryToRenderedFrame[p_entry];
		if not entry then return end


		local children = instanceToChildren[inst];
		local button = entry.Container.InteractDropdown;

		if not children.head then
			button.Visible = false;
		else
			if openDropdowns[inst] then
				button.Dropdown.ImageRectOffset = openRectOffset;
			else
				button.Dropdown.ImageRectOffset = closedRectOffset;
			end
			-- idk if redundant property sets are optimized
			if not button.Visible then
				button.Visible = true;
			end
		end
	end

	local entryPool = {};
	local entryConnections = {};

	function createEntry(inst, depth)
		return {
			inst,			-- object
			depth or 0		-- depth for indenting
		};
	end

	function displayEntry(p_entry)
		local inst = p_entry[1];
		local depth = p_entry[2];
		local new;
		if #entryPool > 0 then
			new = table.remove(entryPool);
			local cons = entryConnections[new];
			if cons then
				for i = 1, #cons do
					cons[i]:Disconnect();
				end
				entryConnections[new] = {};
			end
		else
			new = entryTemplate:Clone();
			entryConnections[new] = {
				new.InputBegan:Connect(function(input)
					if input.UserInputType == Enum.UserInputType.MouseMovement and not selectedInstances[inst] then
						new.Container.Highlight.BackgroundColor3 = Color3.fromRGB(66, 66, 66);
						new.Container.Highlight.Visible = true;
					end
				end),
				new.InputEnded:Connect(function(input)
					if input.UserInputType == Enum.UserInputType.MouseMovement and not selectedInstances[inst] then
						new.Container.Highlight.Visible = false;
					end
				end)
			};
		end


		if selectedInstances[inst] then
			new.Container.Highlight.BackgroundColor3 = Color3.fromRGB(11, 90, 175);
			new.Container.Highlight.Visible = true;
		else
			new.Container.Highlight.Visible = false;
		end
		new.Container.InstanceName.Text = common.filter(inst.Name);
		new.Container.Icon.ImageRectOffset = Vector2.new(getClassIcon(inst.ClassName), 0);
		new.Container.Position = UDim2.new(0, DEPTHPADDING * depth, 0, 0);
		new.Container.Size = UDim2.new(1, -DEPTHPADDING * depth, 1, 0);
		table.insert(entryConnections[new],
			new.Container.InteractDropdown.MouseButton1Click:Connect(function()
				if not openDropdowns[inst] then
					showChildren(inst, depth + 1);
				else
					hideChildren(inst);
				end
			end)
		);

		local function onselect()
			for v, _ in next, selectedInstances do
				local node = instanceToDisplayNode[v];
				if node then
					local p_entry = displayNodeToEntry[node];
					if p_entry then
						local entry = entryToRenderedFrame[p_entry];
						if entry then
							entry.Container.Highlight.Visible = false;
						end
					end
				end
			end
			selectedInstances = {};
			selectedInstances[inst] = true;
			new.Container.Highlight.BackgroundColor3 = Color3.fromRGB(11, 90, 175);
			new.Container.Highlight.Visible = true;

			API.showPropertiesFor(inst);
			API.selectedInstance = inst;
		end

		table.insert(entryConnections[new],
			new.InteractButton.MouseButton1Down:Connect(onselect)
		);

		table.insert(entryConnections[new], 
			new.InteractButton.MouseButton2Click:Connect(function() 
				onselect();
				API.showContextMenuFor(inst);
			end)
		);

		table.insert(entryConnections[new],
			inst:GetPropertyChangedSignal("Name"):Connect(function()
				new.Container.InstanceName.Text = common.filter(inst.Name);
			end)
		);

		return new;
	end

	function removeEntry(p_entry)
		local entry = entryToRenderedFrame[p_entry];
		if entry then
			entry.Parent = nil;
			table.insert(entryPool, entry);
			entryToRenderedFrame[p_entry] = nil;
		end
	end

	-- TODO: optimize plz
	function showChildren(inst, depth, sub)
		local dispNode = instanceToDisplayNode[inst];
		if not dispNode then return end
		depth = depth or 0;

		loadContainer(inst);
		openDropdowns[inst] = true;

		local list = instanceToChildren[inst];
		local cur = list.head;
		local prevDispNode = dispNode;

		while cur do
			local newNode = displayed:insertAfter(prevDispNode, cur.value);
			instanceToDisplayNode[cur.value] = newNode;
			prevDispNode = newNode;

			local entry = createEntry(cur.value, depth);
			displayNodeToEntry[newNode] = entry;

			if openDropdowns[cur.value] then
				local temp = showChildren(cur.value, depth + 1, true);
				if temp then
					prevDispNode = temp;
				end
			end

			cur = cur.next;
		end

		if not sub then
			renumberEntries();
		end

		return prevDispNode;
	end

	function hideChildren(inst, sub)
		if not sub then
			openDropdowns[inst] = false;
		end

		loadContainer(inst);
		local list = instanceToChildren[inst];
		local cur = list.head;
		while cur do
			local dispNode = instanceToDisplayNode[cur.value];
			if dispNode then
				displayed:removeNode(dispNode);

				local entry = displayNodeToEntry[dispNode];
				if entry then
					removeEntry(entry);
				end
				displayNodeToEntry[dispNode] = nil;

				if openDropdowns[cur.value] then
					hideChildren(cur.value, true);
				end
			end

			cur = cur.next;
		end

		if not sub then
			renumberEntries();
		end
	end

	function getCurrentTopIdx()
		return math.max(math.floor(math.floor(listFrame.CanvasPosition.Y + .5) / TOTALENTRY) - 1, 0);
	end
	function getMaxElements()
		return math.floor(listFrame.AbsoluteSize.Y / TOTALENTRY) + 1;
	end

	local scheduled = false;
	function scheduleRenumber()
		scheduled = true;
	end
	spawn(function()
		while wait(.1) do
			if scheduled then
				scheduled = false;
				renumberEntries();
			end
		end
	end);

	function renumberEntries()
		local top = getCurrentTopIdx();
		local elems = getMaxElements();
		local bot = top + elems;

		local i = 1;
		local cur = displayed.head;
		local showing = {};
		while cur do
			local p_entry = displayNodeToEntry[cur];

			if p_entry then
				if i > top and i <= bot then
					local entry = entryToRenderedFrame[p_entry];
					if not entry then
						entry = displayEntry(p_entry);
						entryToRenderedFrame[p_entry] = entry;
					end
					showing[entry] = true; 
					updateDropdownButton(p_entry[1]);

					if entry.LayoutOrder ~= i then
						entry.LayoutOrder = i;
					end
					if entry.Parent ~= listFrame then
						entry.Parent = listFrame;
					end
				elseif i > bot then
					break;
				else
					removeEntry(p_entry);
				end
				i = i + 1;
			end

			cur = cur.next;
		end

		for i, v in next, entryToRenderedFrame do
			if not showing[v] then
				removeEntry(i);
			end
		end

		local viewSize = listFrame.AbsoluteSize.Y;
		local newSize = (displayed.count + 3) * TOTALENTRY;
		local curPos = listFrame.CanvasPosition.Y;
		local lowest = newSize - listFrame.AbsoluteSize.Y;

		listFrame.CanvasSize = UDim2.new(0, 0, 0, newSize);

		if curPos <= lowest then
			paddingFrame.Size = UDim2.new(1, 0, 0, math.floor(curPos/2)*2 - 1);
		else
			local t = math.max(lowest, 0);
			paddingFrame.Size = UDim2.new(1, 0, 0, t + curPos % TOTALENTRY);
			listFrame.CanvasPosition = Vector2.new(0, t);
		end
	end


	if _built then
		for i, v in next, protectedServices do
			table.insert(whitelistedServices, v)
		end
	end

	for _, service in next, whitelistedServices do
		local inst = game:GetService(service);
		local temp = displayed:insertLast(inst);
		instanceToDisplayNode[inst] = temp;
		displayNodeToEntry[temp] = createEntry(inst);
		loadContainer(inst);
		updateDropdownButton(inst);
	end

	renumberEntries();

	listFrame:GetPropertyChangedSignal("CanvasPosition"):Connect(function()
		renumberEntries();
	end);

	dragging.makeDraggable(backgroundFrame, backgroundFrame.Top);

	searchInput:GetPropertyChangedSignal("Text"):Connect(function()
		if searchInput.Text == "" then
			currentSearchTerm = nil;
		end
	end);

	searchInput.FocusLost:Connect(function(enter)
		if enter then
			currentSearchTerm = searchInput.Text:lower();
		end
	end);
end)
--PropertiesLocal.lua
spawn(function()
--[[
	Properties implementation
	- API dump will be pre-generated and static
	- Need to preprocess the raw JSOM into a dictionary form
	  so that lookup is efficient
	- Displaying of the properties will be implemented
	  naively, because performance here is not as critical as
	  the explorer
	- This script needs to register a function to display the
	  properties of an instance in the API
	
	TODO:
	- Preprocess the dump locally to make it smaller, also
	  probably make it a lua table so JSON is not required
	  (which costs startup time)
==]]

	wait();

	local exclude = {
		Mass = true, -- bullshit
	};

	local start = tick();

	local players = game:GetService("Players");
	local http = game:GetService("HttpService");
	local uis = game:GetService("UserInputService");
	local textService = game:GetService("TextService");
	local player = players.LocalPlayer;
	local dragging = require("Dragging");
	local apiDumpRaw = require("ApiDump");
	local API = require("API");
	local common = require("Common");

	local backgroundFrame = guiroot.PropertiesBackground;
	local listFrame = backgroundFrame.Inner.List;
	local titleLabel = backgroundFrame.Top.Title;
	local entryTemplate = listFrame.EntryTemplate:Clone();
	local checkboxTemplate = listFrame.CheckboxTemplate:Clone();
	local headerTemplate = listFrame.HeaderTemplate:Clone();
	local dropdownTemplate = listFrame.DropdownTemplate:Clone();

	local propertyApi = {};
	function parseAPI(raw)
		local success, data = pcall(http.JSONDecode, http, raw);
		if not success then
			error("json parse error"); -- todo: no errors
		end

		local rawClasses = data.Classes;
		for i = 1, #rawClasses do
			local class = rawClasses[i];

			local rawMembers = class.Members;
			local props = {};
			for j = 1, #rawMembers do
				local member = rawMembers[j];
				if member.MemberType == "Property" then
					local tags = member.Tags or {};
					if not exclude[member.Name] and not table.find(tags, "NotScriptable") and not table.find(tags, "Deprecated") and not table.find(tags, "Hidden") then
						props[member.Name] = {
							name = member.Name,
							category = member.Category,
							secure = _built and 0 or ((member.Security.Read == "None" and member.Security.Write == "None") and 0 or 1),
							valueName = member.ValueType.Name,
							valueCategory = member.ValueType.Category,
							tags = tags,
							readonly = table.find(tags, "ReadOnly")
						}
					end
				end
			end

			local newClass = {
				name = class.Name,
				super = class.Superclass,
				tags = class.Tags,
				properties = props
			};
			propertyApi[class.Name] = newClass;
		end
	end
	parseAPI(apiDumpRaw);

	function clearList()
		for i, v in next, listFrame:GetChildren() do
			if v:IsA("Frame") then
				v:Destroy();
			end
		end
	end

	function getPropertiesOfClass(classname)
		local ret = {};
		repeat
			local cur = propertyApi[classname];
			if not cur then break end

			for i, prop in next, cur.properties do
				if prop.secure == 0 then -- remove later
					table.insert(ret, prop);
				end
			end

			classname = cur.super;

		until classname == "<<<ROOT>>>"

		return ret;
	end

	local currentInstance;
	local currentConnections = {};
	local currentProperties;
	local currentFocused;

	local labels = {};
	local textSize = 0;
	local layoutIdx = 0;
	local closeCounter = 0;
	local openRectOffset = Vector2.new(24, 0); -- todo: move to constant module
	local closedRectOffset = Vector2.new(12, 0);
	local readonlyColor = Color3.fromRGB(85, 85, 85);
	local unselectedColor = Color3.fromRGB(204, 204, 204);
	local selectedBorderColor = Color3.fromRGB(53, 181, 255);
	local unselectedBorderColor = Color3.fromRGB(34, 34, 34);
	local hoverColor = Color3.fromRGB(66, 66, 66);
	local backgroundColor = Color3.fromRGB(46, 46, 46);
	local highlightNameColor = Color3.fromRGB(11, 90, 175);
	local focusedBackgroundColor = Color3.fromRGB(37, 37, 37);

	local dropdownSelected;
	function makeCategoryEntry(name)
		local open = true;
		local new = headerTemplate:Clone();
		new.Container.HeaderText.Text = name;
		new.InteractButton.MouseButton1Click:Connect(function()
			open = not open;
			new.Container.InteractDropdown.Dropdown.ImageRectOffset = open and openRectOffset or closedRectOffset;
			for i, v in next, listFrame:GetChildren() do
				if v:IsA("Frame") and v.Name == name then
					v.Visible = open;
				end
			end
		end);
		new.InputBegan:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement and not dropdownSelected then
				new.Container.BackgroundColor3 = hoverColor;
			end
		end);

		new.InputEnded:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement then
				new.Container.BackgroundColor3 = Color3.fromRGB(53, 53, 53);
			end
		end);

		new.LayoutOrder = layoutIdx;
		new.Parent = listFrame;

		layoutIdx = layoutIdx + 1;
	end

	function coerceInputToType(input, propType)
		if propType == "int" or propType == "int64" then
			local n = tonumber(input);
			if n then
				return true, math.floor(n);
			end
			return false, nil;
		elseif propType == "float" or propType == "double" then
			local n = tonumber(input);
			if n then
				return true, n;
			end
			return false, nil;
		elseif propType == "string" then
			return true, input;
		end
		return false, nil;
	end

	function truncateNumber(n)
		return (string.format("%.5f", n):gsub("(0+)$", ""):gsub("%.$", ""));
	end

	function formatValue(v, t)
		if t == "float" or t == "double" then
			return truncateNumber(v);
		end
		return common.filter(tostring(v));
	end

	function connectHighlight(new)
		new.InputBegan:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement and currentFocused ~= new and not dropdownSelected then
				new.PropertyContainer.BackgroundColor3 = hoverColor;
				new.ValueContainer.BackgroundColor3 = hoverColor;
			end
		end);

		new.InputEnded:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement and currentFocused ~= new then
				new.PropertyContainer.BackgroundColor3 = backgroundColor;
				new.ValueContainer.BackgroundColor3 = backgroundColor;
			end
		end);
	end

	function makePropertyEntry(prop)
		local new = entryTemplate:Clone();
		local propertyContainer = new.PropertyContainer;
		local valueContainer = new.ValueContainer;
		new.Name = prop.category;
		propertyContainer.Property.Text = prop.name;
		valueContainer.Value.Text = formatValue(currentInstance[prop.name], prop.valueName);

		if prop.readonly then
			propertyContainer.Property.TextColor3 = readonlyColor;
			valueContainer.Value.TextColor3 = readonlyColor;
			valueContainer.Value.TextEditable = false;
		end

		new.ValueContainer.Value.FocusLost:Connect(function()
			if currentFocused == new then currentFocused = nil end

			propertyContainer.BackgroundColor3 = backgroundColor;
			propertyContainer.Property.TextColor3 = unselectedColor;
			valueContainer.BackgroundColor3 = backgroundColor
			valueContainer.BorderColor3 = unselectedBorderColor;
			valueContainer.BorderMode = Enum.BorderMode.Outline;
			valueContainer.Size = new.ValueContainer.Size + UDim2.new(0, 0, 0, 1);

			if not prop.readonly then
				local success, val = coerceInputToType(valueContainer.Value.Text, prop.valueName);
				if success then
					currentInstance[prop.name] = val;
				end
				valueContainer.Value.Text = formatValue(currentInstance[prop.name], prop.valueName);
			end
		end);

		new.ValueContainer.Value.Focused:Connect(function()
			wait()
			currentFocused = new;
			propertyContainer.BackgroundColor3 = highlightNameColor;
			propertyContainer.Property.TextColor3 = Color3.new(1, 1, 1);
			valueContainer.BackgroundColor3 = focusedBackgroundColor;
			valueContainer.BorderColor3 = selectedBorderColor;
			valueContainer.BorderMode = Enum.BorderMode.Inset;
			valueContainer.Size = valueContainer.Size + UDim2.new(0, 0, 0, -1);
		end);

		connectHighlight(new);

		new.LayoutOrder = layoutIdx;
		new.Parent = listFrame;
		table.insert(currentConnections,
			currentInstance:GetPropertyChangedSignal(prop.name):Connect(function()
				valueContainer.Value.Text = formatValue(currentInstance[prop.name], prop.valueName);
			end)
		);

		layoutIdx = layoutIdx + 1;

		return new;
	end

	function makeCheckboxEntry(prop)
		local new = checkboxTemplate:Clone();
		local propertyContainer = new.PropertyContainer;
		local valueContainer = new.ValueContainer;
		local checkbox = valueContainer.Checkbox
		new.Name = prop.category;
		propertyContainer.Property.Text = prop.name;
		checkbox.ImageTransparency = currentInstance[prop.name] and 0 or 1;

		if prop.readonly then
			propertyContainer.Property.TextColor3 = readonlyColor;
			checkbox.Image = "http://www.roblox.com/asset/?id=4824329078";
			checkbox.BorderColor3 = Color3.fromRGB(64, 64, 64);
			checkbox.BackgroundColor3 = Color3.fromRGB(53, 53, 53);
		else
			checkbox.MouseButton1Click:Connect(function()
				local cur = currentInstance[prop.name];
				currentInstance[prop.name] = not cur;
				checkbox.ImageTransparency = cur and 1 or 0;
			end);
		end

		connectHighlight(new);

		new.LayoutOrder = layoutIdx;
		new.Parent = listFrame;
		table.insert(currentConnections,
			currentInstance:GetPropertyChangedSignal(prop.name):Connect(function()
				checkbox.ImageTransparency = currentInstance[prop.name] and 0 or 1;
			end)
		);

		layoutIdx = layoutIdx + 1;

		return new;
	end

	local zindexOverride = 4;
	function makeEnumEntry(prop)
		local new = dropdownTemplate:Clone();
		local propertyContainer = new.PropertyContainer;
		local valueContainer = new.ValueContainer;
		local dropdownList = valueContainer.Dropdown;

		new.Name = prop.category;
		propertyContainer.Property.Text = prop.name;
		valueContainer.Dropdown.Visible = false;

		local hovered = currentInstance[prop.name].Name;
		valueContainer.Value.Text = hovered;
		local optionTemplate = dropdownList.Option:Clone();
		dropdownList.Option:Destroy();

		if prop.readonly then
			propertyContainer.Property.TextColor3 = readonlyColor;
			valueContainer.ArrowFrame.Visible = false;
		else
			local curIdx = layoutIdx;
			local function callback()
				if dropdownSelected ~= new then
					wait(1/15);
					dropdownList.Visible = true;

					currentFocused = new;
					propertyContainer.BackgroundColor3 = highlightNameColor;
					propertyContainer.Property.TextColor3 = Color3.new(1, 1, 1);
					valueContainer.BackgroundColor3 = focusedBackgroundColor;
					valueContainer.BorderColor3 = selectedBorderColor;
					valueContainer.BorderMode = Enum.BorderMode.Inset;
					valueContainer.Size = new.ValueContainer.Size + UDim2.new(0, 0, 0, -1);

					dropdownList[hovered].BackgroundColor3 = hoverColor;
					new.ZIndex = zindexOverride;
					valueContainer.ZIndex = zindexOverride;
					dropdownList.ZIndex = zindexOverride;
					for i, v in next, dropdownList:GetChildren() do
						if v:IsA("Frame") then
							v.ZIndex = zindexOverride;
							v.Value.ZIndex = zindexOverride + 1;

							if v.Name ~= hovered then
								v.BackgroundColor3 = backgroundColor;
							end
						end
					end

					for i, v in next, listFrame:GetChildren() do
						if v:IsA("Frame") and v.LayoutOrder > curIdx then
							if v:FindFirstChild("ValueContainer") and v.ValueContainer:FindFirstChild("Value") and v.ValueContainer.Value:IsA("TextBox") then
								local y0 = dropdownList.AbsolutePosition.Y;
								local y1 = v.AbsolutePosition.Y;

								if y1 > y0 and y1 < (y0 + dropdownList.AbsoluteSize.Y - 10) then
									v.ValueContainer.Value.Visible = false;
								end
							end
						end
					end

					dropdownSelected = new;
				end
			end

			valueContainer.Value.MouseButton1Down:Connect(callback);
			valueContainer.ArrowFrame.Icon.MouseButton1Down:Connect(callback);

			local enumItems = Enum[prop.valueName]:GetEnumItems();
			dropdownList.Size = UDim2.new(1, 0, 0, 15*math.min(#enumItems, 10))
			dropdownList.CanvasSize = UDim2.new(0, 0, 0, 15*#enumItems);
			for i, v in next, enumItems do
				local opt = optionTemplate:Clone();
				opt.LayoutOrder = i;
				opt.Name = v.Name;
				opt.Value.Text = v.Name;
				opt.Parent = dropdownList;

				opt.Value.MouseButton1Down:Connect(function()
					currentInstance[prop.name] = v;
				end);

				opt.InputBegan:Connect(function(input)
					if input.UserInputType == Enum.UserInputType.MouseMovement then
						opt.BackgroundColor3 = hoverColor;
						for _, val in next, dropdownList:GetChildren() do
							if val:IsA("Frame") and val ~= opt then
								val.BackgroundColor3 = backgroundColor;
							end
						end
					end
				end);
			end

			dropdownList.InputBegan:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 then
					closeCounter = closeCounter + 1;
				end
			end);
		end

		connectHighlight(new);

		new.LayoutOrder = layoutIdx;
		new.Parent = listFrame;
		table.insert(currentConnections,
			currentInstance:GetPropertyChangedSignal(prop.name):Connect(function()
				hovered = currentInstance[prop.name].Name;
				valueContainer.Value.Text = hovered;
			end)
		);

		layoutIdx = layoutIdx + 1;

		return new;
	end

	uis.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 and dropdownSelected then
			wait();
			if closeCounter > 0 then
				closeCounter = closeCounter - 1;
				return;
			end

			local propertyContainer = dropdownSelected.PropertyContainer;
			local valueContainer = dropdownSelected.ValueContainer;
			local dropdownList = valueContainer.Dropdown;

			propertyContainer.BackgroundColor3 = backgroundColor;
			propertyContainer.Property.TextColor3 = unselectedColor;
			valueContainer.BackgroundColor3 = backgroundColor
			valueContainer.BorderColor3 = unselectedBorderColor;
			valueContainer.BorderMode = Enum.BorderMode.Outline;
			valueContainer.Size = valueContainer.Size + UDim2.new(0, 0, 0, 1);
			dropdownList.Visible = false;

			dropdownSelected.ZIndex = 1;
			valueContainer.ZIndex = 1;
			dropdownList.ZIndex = 1;
			for i, v in next, dropdownList:GetChildren() do
				if v:IsA("Frame") then
					v.ZIndex = 1;
					v.Value.ZIndex = 1 + 1;
				end
			end

			for i, v in next, listFrame:GetChildren() do
				if v:IsA("Frame") then
					if v:FindFirstChild("ValueContainer") and v.ValueContainer:FindFirstChild("Value") and v.ValueContainer.Value:IsA("TextBox") then
						v.ValueContainer.Value.Visible = true;
					end
				end
			end

			dropdownSelected = nil;
		end
	end)

	function updateSizes()
		local xoff = textSize + 6 + 6;
		for j = 1, #labels do
			local v = labels[j];
			v.PropertyContainer.Size = UDim2.new(0, xoff, 1, 0);
			v.ValueContainer.Size = UDim2.new(1, -xoff - 20, 1, 0);
			v.ValueContainer.Position = UDim2.new(0, xoff + 20, 0, 0);
		end
	end

	function API.showPropertiesFor(inst)
		clearList();
		layoutIdx = 0;
		currentInstance = inst;
		titleLabel.Text = ("Properties - %s %q"):format(inst.ClassName, common.filter(inst.Name));
		for i, v in next, currentConnections do
			v:Disconnect();
		end
		currentConnections = {};

		local props = getPropertiesOfClass(inst.ClassName);
		currentProperties = props;

		local categories = {};
		local categoryFound = {};
		textSize = 0;

		local foundAppearance = false;
		for i = 1, #props do
			local v = props[i];
			if v.category ~= "Appearance" then
				if not categoryFound[v.category] and v.category ~= "Data" then
					categoryFound[v.category] = true;
					table.insert(categories, v.category);
				end
			else
				foundAppearance = true;
			end
		end

		table.sort(categories); -- using table.sort cuz lazy
		table.insert(categories, 1, "Data");
		if foundAppearance then
			table.insert(categories, 1, "Appearance");
		end

		labels = {};
		local size = 0;
		for i = 1, #categories do
			local category = categories[i];
			makeCategoryEntry(category);
			size = size + 26;

			local inCategory = {};
			for j = 1, #props do
				local v = props[j];
				if v.category == category then
					table.insert(inCategory, v);
				end
			end

			table.sort(inCategory, function(a, b) return a.name < b.name end);

			for j = 1, #inCategory do
				local v = inCategory[j];
				textSize = math.max(textSize, textService:GetTextSize(v.name, 14, Enum.Font.SourceSans, Vector2.new(1000, 1000)).X);

				size = size + 24;
				if v.valueName == "bool" then
					table.insert(labels, makeCheckboxEntry(v));
				elseif v.valueCategory == "Enum" then
					table.insert(labels, makeEnumEntry(v));
				else
					table.insert(labels, makePropertyEntry(v));
				end
			end

		end

		updateSizes()
		listFrame.CanvasSize = UDim2.new(0, 0, 0, size);
	end

	function API.stopProperties()
		currentFocused = nil;
		currentInstance = nil;
		currentProperties = nil;
		for i, v in next, currentConnections do
			v:Disconnect();
		end
		currentConnections = {};

		labels = {};
		textSize = 0;
		layoutIdx = 0;
		titleLabel.Text = "Properties";
		listFrame.CanvasSize = UDim2.new();
		clearList();
	end

	API.stopProperties();

	dragging.makeDraggable(backgroundFrame, backgroundFrame.Top);
end)
--ContextLocal.lua
spawn(function()
	wait();

	local players = game:GetService("Players");
	local uis = game:GetService("UserInputService");
	local player = players.LocalPlayer;
	local mouse = player:GetMouse();
	local common = require("Common");
	local API = require("API");

	local backgroundFrame = guiroot.ContextBackground;
	local holderFrame = backgroundFrame.Holder;
	local dividerTemplate = holderFrame.Divider:Clone();
	local entryTemplate = holderFrame.Entry:Clone();
	holderFrame.Divider:Destroy();
	holderFrame.Entry:Destroy();
	backgroundFrame.Size = UDim2.new(0, 220, 0, 0);

	local registered = {
	--[[
		example structure
		{
			name = "Delete",
			icon = "",
			keybindDesc = "Del",
			callback = function(instance) end
		}
	]]
	};
	local currentInst;
	local menuOpen = false;

	function hideMenu()
		menuOpen = false;
		backgroundFrame.Visible = false;
	end
	hideMenu();

	function showMenu()
		menuOpen = true;
		backgroundFrame.Position = UDim2.new(0, mouse.X, 0, mouse.Y);
		backgroundFrame.Visible = true;
	end

	API.registered = registered;
	function API.registerContextItem(name, icon, keybindDesc, callback)
		table.insert(registered, {name = name, icon = icon, keybindDesc = keybindDesc, callback = callback});

		local new = entryTemplate:Clone();
		new.LayoutOrder = #registered;
		new.Icon.Image = icon;
		new.Keybind.Text = keybindDesc;
		new.Label.Text = name;
		new.Parent = holderFrame;

		new.InputBegan:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement then
				new.BackgroundColor3 = Color3.fromRGB(66, 66, 66);
			elseif input.UserInputType == Enum.UserInputType.MouseButton1 then
				if currentInst then
					callback(currentInst);
				end
			end
		end);
		new.InputEnded:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement then
				new.BackgroundColor3 = Color3.fromRGB(46, 46, 46);
			end
		end);

		backgroundFrame.Size = backgroundFrame.Size + UDim2.new(0, 0, 0, 22);
	end

	function API.insertDivider()
		table.insert(registered, "div");

		local new = dividerTemplate:Clone();
		new.LayoutOrder = #registered;
		new.Parent = holderFrame;
		backgroundFrame.Size = backgroundFrame.Size + UDim2.new(0, 0, 0, 7);
	end

	function API.showContextMenuFor(inst)
		currentInst = inst;
		showMenu();
	end

	uis.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 and menuOpen then
			hideMenu();
		end
	end);

	API.formatPath = common.formatPath;

	API.registerContextItem("Delete", "", "Del", function(inst)
		inst:Destroy();
	end);

	if _built then
		API.registerContextItem("Copy path", "", "", function(inst)
			local setclipboard = setclipboard or (Clipboard and Clipboard.set)
			setclipboard(common.formatPath(inst));
		end)
	end
end)
